<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trang cá nhân - DNSE</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>

  <!-- Navbar -->
  <div id="navbar-placeholder"></div>

  <main class="container my-4">
    <h2 class="mb-4 text-primary"><i class="bi bi-person-circle"></i> Trang cá nhân</h2>

    <div class="row">
      <!-- Avatar + thông tin chung -->
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body text-center">
            <img id="profileAvatar" src="images/avatar_default.png" class="rounded-circle mb-3" width="120" height="120">
            <h4 id="profileFullname">Tên người dùng</h4>
            <p id="profileEmail" class="text-muted small"></p>

            <button class="btn btn-outline-primary btn-sm mt-2" id="changeAvatarBtn">
              <i class="bi bi-camera"></i> Đổi ảnh đại diện
            </button>

            <input type="file" id="avatarInput" accept="image/*" class="d-none">
          </div>
        </div>
      </div>

      <!-- Thông tin chi tiết + đổi mật khẩu -->
      <div class="col-md-8">
        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <h5 class="mb-3 text-secondary"><i class="bi bi-info-circle"></i> Thông tin cá nhân</h5>
            
            <div class="row mb-2">
              <div class="col-4 fw-bold">Mã nhân viên:</div>
              <div class="col-8" id="detailEmployeeId">...</div>
            </div>

            <div class="row mb-2">
              <div class="col-4 fw-bold">Họ tên:</div>
              <div class="col-8" id="detailFullname">...</div>
            </div>

            <div class="row mb-2">
              <div class="col-4 fw-bold">Email:</div>
              <div class="col-8" id="detailEmail">...</div>
            </div>

            <div class="row mb-2">
              <div class="col-4 fw-bold">Phòng ban:</div>
              <div class="col-8" id="detailDepartment">...</div>
            </div>

            <div class="row mb-2">
              <div class="col-4 fw-bold">Chi nhánh:</div>
              <div class="col-8" id="detailBranch">...</div>
            </div>

            <div class="row mb-2">
              <div class="col-4 fw-bold">Chức vụ:</div>
              <div class="col-8" id="detailJobTitle">...</div>
            </div>

          </div>
        </div>

        <!-- Đổi mật khẩu -->
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="mb-3 text-danger"><i class="bi bi-shield-lock"></i> Đổi mật khẩu</h5>

            <div class="mb-3">
              <label class="form-label">Mật khẩu cũ</label>
              <input type="password" id="oldPassword" class="form-control">
            </div>

            <div class="mb-3">
              <label class="form-label">Mật khẩu mới</label>
              <input type="password" id="newPassword" class="form-control">
            </div>

            <button class="btn btn-danger" id="btnChangePassword">
              Cập nhật mật khẩu
            </button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer class="bg-dark text-white text-center py-3 mt-5">
    <span>&copy; 2025 DNSE</span>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="js/navbar.js"></script>
  <script>
    $(document).ready(function() {
      $("#navbar-placeholder").load("navbar.html", function() {
        if (typeof initNavbar === "function") initNavbar();
      });
    });
  </script>

    <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/navbar.js"></script> <!-- file navbar logic bạn vừa tạo -->
  <script>
    $(document).ready(function() {
      // Tải navbar.html và ép trình duyệt không dùng cache cũ
      $("#navbar-placeholder").load("navbar.html?v=" + Math.random(), function(response, status, xhr) {
        if (status == "error") {
          console.log("Lỗi tải navbar: " + xhr.status + " " + xhr.statusText);
        } else {
          // Load xong HTML thì mới chạy logic JS
          console.log("Navbar HTML loaded!");
          if (typeof initNavbar === "function") {
              initNavbar();
          }
        }
      });
    });
  </script>
  <script>
    // Kiểm tra trạng thái đăng nhập
    const token = localStorage.getItem("token");
    const loginBtn = document.getElementById("loginBtn");
    const accountMenu = document.getElementById("accountMenu");

    // if (token) {
    //   loginBtn.style.display = "none";
    //   accountMenu.style.display = "block";
    // } else {
    //   loginBtn.style.display = "block";
    //   accountMenu.style.display = "none";
    // }
  </script>
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/main.js"></script>
</body>
</html>