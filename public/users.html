<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Danh bạ nhân viên - DNSE</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />

  <style>
    body { background-color: #f8f9fc; }
    
    /* Avatar chữ cái */
    .avatar-circle {
        width: 42px; height: 42px;
        background-color: #e3e6f0;
        color: #fff;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-weight: 600; font-size: 15px;
        text-transform: uppercase;
    }
    
    /* Card và Table */
    .filter-card { border: 0; box-shadow: 0 2px 10px rgba(0,0,0,0.05); border-radius: 8px; margin-bottom: 20px; }
    .table-card { border: 0; box-shadow: 0 2px 15px rgba(0,0,0,0.05); border-radius: 8px; overflow: hidden; }
    
    .table thead th { 
        background-color: #fff; 
        color: #4e73df; 
        font-weight: 700; 
        text-transform: uppercase; 
        font-size: 0.75rem; 
        border-bottom: 2px solid #e3e6f0;
        vertical-align: middle;
        padding-top: 15px; padding-bottom: 15px;
    }
    .table tbody td { vertical-align: middle; color: #5a5c69; font-size: 0.9rem; padding: 12px 15px; }
    .table-hover tbody tr:hover { background-color: #f8f9fc; }
  </style>
</head>
<body>
  <div id="navbar-placeholder"></div>

  <main class="container my-4">
    
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="h3 text-gray-800 fw-bold mb-0"><i class="bi bi-person-lines-fill"></i> Danh bạ nhân viên</h2>
            <p class="text-muted small mb-0">Tra cứu thông tin liên hệ nội bộ</p>
        </div>
        <div class="text-end">
             <span class="badge bg-primary rounded-pill px-3 py-2">
                <i class="bi bi-people-fill me-1"></i> Tổng: <span id="totalCount">0</span>
             </span>
        </div>
    </div>

    <div class="card filter-card">
        <div class="card-body p-3">
            <div class="row g-2 align-items-center">
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text bg-white text-muted border-end-0"><i class="bi bi-search"></i></span>
                        <input type="text" id="searchInput" class="form-control border-start-0 ps-0" placeholder="Tìm tên, email, mã nhân viên...">
                    </div>
                </div>
                
                <div class="col-md-2">
                    <select id="departmentFilter" class="form-select text-secondary" style="font-size: 0.9rem;">
                        <option value="">-- Phòng ban --</option>
                    </select>
                </div>

                <div class="col-md-2">
                    <select id="branchFilter" class="form-select text-secondary" style="font-size: 0.9rem;">
                        <option value="">-- Chi nhánh --</option>
                    </select>
                </div>

                <div class="col-md-2">
                    <select id="jobTitleFilter" class="form-select text-secondary" style="font-size: 0.9rem;">
                        <option value="">-- Chức vụ --</option>
                    </select>
                </div>

                <div class="col-md-2 d-grid">
                    <button class="btn btn-outline-secondary btn-sm" onclick="resetFilters()">
                        <i class="bi bi-x-circle"></i> Xóa lọc
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="card table-card">
      <div class="table-responsive">
        <table class="table table-hover mb-0" id="usersTable">
          <thead>
            <tr>
              <th class="ps-4">Thông tin nhân viên</th>
              <th>Vị trí công việc</th>
              <th>Chi nhánh</th>
              <th>Team / Nhóm</th>
            </tr>
          </thead>
          <tbody id="usersTableBody">
            <tr>
                <td colspan="4" class="text-center py-5 text-muted">
                    <div class="spinner-border spinner-border-sm text-primary mb-2"></div>
                    <div>Đang tải danh bạ...</div>
                </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <footer class="bg-dark text-white py-4 mt-5">
     <div class="container text-center">
        <img src="images/dnse_logo_notext.png" alt="DNSE" style="height: 30px; opacity: 0.8;" class="mb-2">
        <p class="small text-white-50 mb-0">&copy; 2025 Công ty Cổ phần Chứng khoán DNSE. All rights reserved.</p>
     </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/navbar.js"></script>
  <script>
    $(document).ready(function() {
      $("#navbar-placeholder").load("navbar.html?v=" + Math.random(), function(){ if(typeof initNavbar === "function") initNavbar(); });
    });
    
    function resetFilters() {
        document.getElementById('searchInput').value = '';
        document.getElementById('departmentFilter').value = '';
        document.getElementById('branchFilter').value = '';
        document.getElementById('jobTitleFilter').value = '';
        // Gọi lại logic lọc để hiện full bảng
        if(typeof applyUserFilter === 'function') applyUserFilter();
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/users.js"></script>
</body>
</html>